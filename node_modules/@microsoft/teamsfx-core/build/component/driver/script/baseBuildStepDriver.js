"use strict";
// Copyright (c) Microsoft Corporation.
// Licensed under the MIT license.
Object.defineProperty(exports, "__esModule", { value: true });
exports.BaseBuildStepDriver = void 0;
const common_1 = require("../../utils/common");
class BaseBuildStepDriver {
    async run(args, context) {
        const impl = this.getImpl(args, context);
        return common_1.wrapRun(() => impl.run(), () => impl.cleanup());
    }
    execute(args, ctx) {
        var _a, _b;
        const impl = this.getImpl(args, ctx);
        return common_1.wrapSummaryWithArgs(this.run.bind(this, args, ctx), [
            ["driver.script.buildSummary", (_a = impl.getCommand()) !== null && _a !== void 0 ? _a : "", (_b = impl.workingDirectory) !== null && _b !== void 0 ? _b : ""],
        ]);
    }
}
exports.BaseBuildStepDriver = BaseBuildStepDriver;
//# sourceMappingURL=baseBuildStepDriver.js.map